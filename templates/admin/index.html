{% include 'admin/header.html' %}
{% block body %}
    <main>
    <section class="content">
      <div class="page-announce valign-wrapper"><a href="#" data-activates="slide-out" class="button-collapse valign hide-on-large-only"><i class="material-icons">menu</i></a><h1 class="page-announce-text valign">// Dashboard </h1></div>

                <h3 class="center-align">Current Applications</h3>
                <div class="custom-responsive">
                  <table class="striped hover centered">
                    <thead><tr>
                      <th>Username</th>
                        <th>Date Requested</th>
                      <th>Email</th>
                      <th>Hall</th>
                      <th>Comments</th>
                      <th>Accepted?</th>
                      <th>Action</th>
                    </tr>
                  </thead>
                  <tbody>
                    {% for row in applications %}
                <tr>
                    <td>{{row.1}}</td>
                    <td>{{row.2}}</td>
                    <td>{{row.4}}</td>
                    <td>{{row.6}}</td>
                    <td>{{row.7}}</td>
        {% if row[8] == 0 %}
        <td><i class="text-green material-icons">maximize</i></td>
                    {% elif row[8] == 1 %}
                    <td><i class="text-green material-icons">check</i></td>
                    {% else %}
                    <td><i class="text-red material-icons">close</i></td>
                    {% endif %}
                    <td>


               <a href="/update/{{row.0}}" class="btn btn-warning btn-xs" data-toggle="modal" data-target="#modaledit{{row.0}}">Edit</a>
                <a href="/delete/{{ row.0 }}" class="btn btn-danger btn-xs" onclick="return confirm('Are You Sure For Delete?')">Delete</a>

                    </td>
                </tr>
                <div id="modaledit{{row.0}}" class="modal fade" role="dialog">


   <div class="modal-dialog">


      <div class="modal-content">


         <div class="modal-header">


            <button type="button" class="close" data-dismiss="modal">&times;</button>


            <h4 class="modal-title">Update Information</h4>


         </div>


         <div class="modal-body">


            <form action="{{ url_for('update') }}" method="POST">


              <div class="form-group">

                 <label>Name</label>
                 <input type="hidden"  name="id_data" value="{{row.0}}">
                 <input type="text" class="form-control" name="name" value="{{session.username}}" disabled>


              </div>



              <div class="form-group">


                 <label>Date From</label>

                 <input type="text" placeholder="2018-09-01 14:45:00" name="datef" value="{{ row.2}}" required>


              </div>


              <div class="form-group">


                 <label>Date To</label>

                 <input type="text" placeholder="2018-09-02 14:45:00" name="datet" value="{{ row.3}}" required>


              </div>



              <div class="form-group">


                 <label>Email</label>

                 <input type="text" class="form-control" name="email" value="{{session.email}}" disabled >


              </div>


              <div class="form-group">


                 <label>Phone</label>

                 <input type="text" class="form-control" name="phone" value="{{session.phone}}" disabled>


              </div>


              <div class="form-group">


                 <label>Hall</label>

                 <input type="text" class="form-control" name="hall" value="{{ row.6 }}" required>


              </div>


              <div class="form-group">


                 <label>Purpose</label>

                 <input type="text" class="form-control" name="comment" value="{{ row.7}}"required>


              </div>


               <div class="form-group">


                  <button class="btn btn-primary" type="sbumit">Update</button>


               </div>


            </form>


         </div>


         <div class="modal-footer">


            


         </div>


      </div>


   </div>


</div>
                  {% endfor %}
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </section>
        </main>
{% endblock %}
        <!-- So this is basically a hack, until I come up with a better solution. autocomplete is overridden
        in the materialize js file & I don't want that.
        -->
        <!-- Yo dawg, I heard you like hacks. So I hacked your hack. (moved the sidenav js up so it actually works) -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.98.0/js/materialize.min.js"></script>
        <script>
        // Hide sideNav
        $('.button-collapse').sideNav({
        menuWidth: 300, // Default is 300
        edge: 'left', // Choose the horizontal origin
        closeOnClick: false, // Closes side-nav on <a> clicks, useful for Angular/Meteor
          draggable: true // Choose whether you can drag to open on touch screens
          });
          $(document).ready(function(){
          $('.tooltipped').tooltip({delay: 50});
          });
          $('select').material_select();
          $('.collapsible').collapsible();
          </script>
        </div>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
        <script type="text/javascript" src="{{url_for('static', filename='js/jquery-3.2.1.min.js') }}"></script>

        <script type="text/javascript" src="{{url_for('static', filename = 'js/bootstrap.min.js')}}"></script>
        {% include 'admin/footer.html' %}
